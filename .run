#!/bin/sh

cd "$(dirname "$0")"

PORT=8000

# Verificar se existe algum processo a usar a porta
PID=$(lsof -ti tcp:$PORT)

if [ -n "$PID" ]; then
  echo "Porta $PORT em uso, a terminar processo $PID"
  kill -9 $PID
  sleep 1
fi

# Iniciar servidor PHP
php -S localhost:$PORT > /dev/null 2>&1 &

# Dar tempo para arrancar
sleep 1

# Abrir no browser
open http://localhost:$PORT